# EndingSceneApp 测试指南

## 🎯 测试目的

在开发者模式下测试 `EndingSceneApp.vue` 组件，模拟端内APP环境，验证：
- 响应式布局和设计
- 排行榜数据展示
- 游戏次数管理
- 分享功能
- 各种游戏数据场景

## 🚀 快速开始

### 方法1：通过URL参数直接进入测试

```bash
# 进入测试入口页面
http://localhost:3000/?test=entry

# 直接进入EndingSceneApp测试
http://localhost:3000/?test=app

# 直接进入EndingSceneOutside测试
http://localhost:3000/?test=outside
```

### 方法2：通过测试入口页面

1. 启动开发服务器：`npm run dev`
2. 访问：`http://localhost:3000/?test=entry`
3. 点击"EndingSceneApp 测试"按钮

## 🧪 测试功能

### 环境控制
- ✅ **模拟端内APP环境**：强制设置 `userStore.isInQQNewsApp = true`
- ✅ **模拟登录状态**：可以切换登录/未登录状态
- ✅ **环境切换**：实时切换APP内/外环境

### 游戏数据控制
- ✅ **游泳距离**：0-2000米范围调整
- ✅ **星星数量**：0-100颗星星调整
- ✅ **游戏时长**：0-600秒范围调整
- ✅ **实时更新**：数据变化立即反映到组件

### 排行榜数据控制
- ✅ **我的排名**：1-1000名范围调整
- ✅ **超越百分比**：0-100%范围调整
- ✅ **排行榜人数**：10-50人范围调整
- ✅ **模拟数据**：自动生成50人排行榜数据

### 游戏次数管理
- ✅ **今日游戏次数**：0-10次范围调整
- ✅ **最大游戏次数**：显示当前最大允许次数（基础5次+分享奖励3次）
- ✅ **剩余游戏次数**：实时计算剩余次数
- ✅ **游戏状态**：显示是否可以继续游戏
- ✅ **分享奖励**：一键获得3次额外游戏机会

### 界面功能
- ✅ **全屏测试**：切换全屏模式，模拟真实APP环境
- ✅ **实时预览**：左侧控制面板，右侧组件预览
- ✅ **状态显示**：实时显示当前环境、数据、次数等状态
- ✅ **数据重置**：一键重置所有测试数据

## 📱 测试场景

### 1. 基础功能测试
```javascript
// 设置基础测试数据
距离: 500m
星星: 25颗
排名: 156名
超越: 85%
游戏次数: 0次
```

### 2. 极限数据测试
```javascript
// 测试极限情况
距离: 2000m (千米冠军)
星星: 100颗
排名: 1名
超越: 99%
游戏次数: 8次 (已用完)
```

### 3. 零数据测试
```javascript
// 测试零数据情况
距离: 0m
星星: 0颗
排名: 未上榜
超越: 0%
游戏次数: 5次
```

### 4. 游戏次数耗尽测试
```javascript
// 测试次数耗尽情况
游戏次数: 8次
状态: 不可游戏
显示: 分享提示
```

## 🔧 技术实现

### 测试架构
```
App.vue (路由控制)
├── TestEntry.vue (测试入口)
├── EndingSceneAppTest.vue (测试页面)
└── EndingSceneApp.vue (被测试组件)
```

### 数据流
```
测试控制面板 → userStore/gameStore → EndingSceneApp组件
```

### 环境模拟
- **开发模式检测**：`process.env.NODE_ENV === 'development'`
- **URL参数控制**：`?test=app`
- **localStorage持久化**：`endingSceneTestMode`
- **强制环境设置**：模拟端内APP环境

## 🐛 调试技巧

### 1. 控制台日志
```javascript
// 查看测试数据变化
console.log('📊 游戏数据已更新:', testGameData.value)
console.log('🏆 排行榜数据已更新:', testLeaderboardData.value)
console.log('🎯 游戏次数已更新:', userStore.todayPlayCount)
```

### 2. Vue DevTools
- 查看组件状态
- 监控数据变化
- 调试事件触发

### 3. 浏览器开发者工具
- **Elements**：检查DOM结构和样式
- **Console**：查看日志和错误
- **Network**：监控API请求（如果有）
- **Application**：查看localStorage数据

## 📋 测试检查清单

### 布局测试
- [ ] 响应式设计在不同屏幕尺寸下正常
- [ ] 称号文字flex分散效果正确
- [ ] 排行榜滚动功能正常
- [ ] 底部渐变遮罩效果正确

### 数据测试
- [ ] 不同距离显示正确称号
- [ ] 数字使用RadikalW01-Bold字体
- [ ] 颜色符合设计稿规范
- [ ] 排行榜数据正确显示

### 交互测试
- [ ] 再挑战一次按钮功能正常
- [ ] 喊好友一起按钮功能正常
- [ ] 游戏次数耗尽时显示分享提示
- [ ] 分享奖励后游戏次数正确增加

### 环境测试
- [ ] 端内APP环境正确识别
- [ ] 登录状态正确显示
- [ ] 分享功能正确调用
- [ ] 错误处理机制正常

## 🎨 设计验证

### 颜色规范
- **称号文字**：`#5CBBF9` (蓝色)
- **数字文字**：`#5CBBF9` (蓝色)
- **背景色**：`#171717` (深灰)
- **按钮边框**：`#99CCFF` (浅蓝)

### 字体规范
- **称号**：`MFYuanHei` + `PingFang SC`
- **数字**：`RadikalW01-Bold`
- **普通文字**：`PingFang SC`

### 尺寸规范
- **响应式单位**：`vw` (宽度) + `dvh` (高度)
- **称号字体**：`20vw` (大字体)
- **描述字体**：`5.33vw` (中等字体)
- **排行榜字体**：`4vw` (小字体)

## 🚨 注意事项

1. **仅开发环境**：测试功能仅在 `NODE_ENV === 'development'` 时可用
2. **数据隔离**：测试数据不会影响生产环境
3. **API模拟**：测试时使用模拟数据，不会调用真实API
4. **样式验证**：确保在不同设备上测试响应式效果
5. **功能完整**：测试所有交互功能和边界情况

## 📞 技术支持

如果遇到测试问题，请检查：
1. 开发环境是否正确启动
2. URL参数是否正确设置
3. 浏览器控制台是否有错误
4. Vue DevTools是否正常显示组件状态

---

**Happy Testing! 🎮** 